# Copyright (C) 2019 tribe29 GmbH - License: GNU General Public License v2
# This file is part of Checkmk (https://checkmk.com). It is subject to the terms and
# conditions defined in the file COPYING, which is part of this source code package.

{#- Get the `tplroot` from `tpldir` #}
{%- set tplroot = tpldir.split('/')[0] %}
{%- from tplroot ~ "/map.jinja" import check_mk with context %}

{%- set plugin_redis = check_mk.agent.plugins.redis %}
{%- set instance = "redis_" ~ plugin_redis.get('port', '6379') %}

# List of instances, defines service description for resulting checks
REDIS_INSTANCES=(redis_{{  }})

# Host, Port and optional password per instance
REDIS_HOST_{{ instance }}="{{ plugin_redis.get('server', '127.0.0.1') }}"
REDIS_PORT_{{ instance }}="{{ plugin_redis.get('port', '6379') }}"
REDIS_PASSWORD_{{ instance }}='{{ plugin_redis.get('pass', 'no-access-to-redis-credentials') }}'
